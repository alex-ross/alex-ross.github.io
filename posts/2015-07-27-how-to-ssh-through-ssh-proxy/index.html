<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Alexander Ross"/><link rel="canonical" href="https://your-website-url.com/posts/2015-07-27-how-to-ssh-through-ssh-proxy"/><meta name="twitter:url" content="https://your-website-url.com/posts/2015-07-27-how-to-ssh-through-ssh-proxy"/><meta name="og:url" content="https://your-website-url.com/posts/2015-07-27-how-to-ssh-through-ssh-proxy"/><title>How to SSH through SSH proxy | Alexander Ross</title><meta name="twitter:title" content="How to SSH through SSH proxy | Alexander Ross"/><meta name="og:title" content="How to SSH through SSH proxy | Alexander Ross"/><meta name="description" content="I like to build apps, websites, other tools and solutions to make the day more fun and efficient. I want to share as much as possible here as often as possible. But normaly I end up with a few posts per year right now. Work and family takes time as well ðŸ˜‡."/><meta name="twitter:description" content="I like to build apps, websites, other tools and solutions to make the day more fun and efficient. I want to share as much as possible here as often as possible. But normaly I end up with a few posts per year right now. Work and family takes time as well ðŸ˜‡."/><meta name="og:description" content="I like to build apps, websites, other tools and solutions to make the day more fun and efficient. I want to share as much as possible here as often as possible. But normaly I end up with a few posts per year right now. Work and family takes time as well ðŸ˜‡."/><meta name="twitter:card" content="summary"/><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-55009015-1', 'auto');
ga('send', 'pageview');</script><link rel="stylesheet" href="/styles.css?v=5" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/ArossWebsite/favicon-96x96.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Alexander Ross"/><meta name="twitter:image" content="https://your-website-url.com/ArossWebsite/logo.png"/><meta name="og:image" content="https://your-website-url.com/ArossWebsite/logo.png"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Alexander Ross</a></div></header><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4141599655973760" data-ad-slot="7238016739" data-ad-format="auto" data-adtest="on"></ins><div class="wrapper"><article><div class="content"><h1>How to SSH through SSH proxy</h1><p>At our company we do not want any outsiders to access our servers through SSH. Often we prevent logins to root and prevent logins with password. But to be even more secure we started to only allow logins from the IP addresses at our office.</p><p>At our office we have an Mac Mini that is open for SSH to all employees. Here we can have a main list of allowed SSH keys and IP addresses and everyone can SSH Proxy through this one. This makes it a lot easier for us to manage access.</p><h2>So how do you SSH through another server</h2><p>Lets say that our computer we want to use as an SSH Proxy has the domain "proxy.example.com" and the server we will ssh to has "database.example.com". Lets also assume that the user for both servers in my case are "aross".</p><p>SSH has a lot of options we can use. The one we will use is called</p><p><code>ProxyCommand</code>. We will first give it user and host to the proxy server followed by the <code>-W</code>-flag where we tell it to which host and port we want to bind this proxy to. Instead of writing host and port in this case we can use the placeholders <code>%h</code> for <strong>h</strong>ost and <code>%p</code> for <strong>p</strong>ort and the ssh service will figure it all out by itself.</p><p>The command will look like this</p><pre data-language="undefined"><code>
ssh -o ProxyCommand='ssh aross@proxy.example.com -W %h:%p' aross@database.example.com
</code></pre><p>Thats basically it. If you do this allot you could simplify the process by editing your <code>~/.ssh/config</code> file.</p><p>Add this to <code>~/.ssh/config/</code></p><pre data-language="undefined"><code>
Host officeproxy
  User aross
  HostName proxy.example.com

Host database.example.com
  HostName database.example.com
  ProxyCommand ssh officeproxy -W %h:%p
</code></pre><p>Now when you do <code>ssh aross@database.example.com</code> SSH will set up the proxy for you according to the config file.</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/ssh">ssh</a></li><li><a href="/tags/proxy">proxy</a></li></ul></article></div><footer><p><a href="https://standout.se">Work with me</a></p><p><a href="/feed.rss">RSS feed</a></p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></footer></body></html>