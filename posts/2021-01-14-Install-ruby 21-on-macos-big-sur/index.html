<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Alexander Ross"/><link rel="canonical" href="https://aross.se/posts/2021-01-14-Install-ruby%2021-on-macos-big-sur"/><meta name="twitter:url" content="https://aross.se/posts/2021-01-14-Install-ruby%2021-on-macos-big-sur"/><meta name="og:url" content="https://aross.se/posts/2021-01-14-Install-ruby%2021-on-macos-big-sur"/><title>Install ruby 2.1 on macOS Big Sur | Alexander Ross</title><meta name="twitter:title" content="Install ruby 2.1 on macOS Big Sur | Alexander Ross"/><meta name="og:title" content="Install ruby 2.1 on macOS Big Sur | Alexander Ross"/><meta name="description" content="Install ruby 2.1 on macOS Big Sur"/><meta name="twitter:description" content="Install ruby 2.1 on macOS Big Sur"/><meta name="og:description" content="Install ruby 2.1 on macOS Big Sur"/><meta name="twitter:card" content="summary"/><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-55009015-1', 'auto');
ga('send', 'pageview');</script><script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" data-ad-client="ca-pub-4141599655973760"></script><link rel="stylesheet" href="/styles.css?v=5" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/ArossWebsite/favicon-96x96.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Alexander Ross"/><meta name="twitter:image" content="https://aross.se/ArossWebsite/logo.png"/><meta name="og:image" content="https://aross.se/ArossWebsite/logo.png"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Alexander Ross</a></div></header><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4141599655973760" data-ad-slot="7238016739" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><div class="wrapper"><article><p>‚è± around 2 minutes read time</p><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/macos">macos</a></li><li><a href="/tags/ruby">ruby</a></li></ul><div class="content"><h1>Install ruby 2.1 on macOS Big Sur</h1><p>Installing ruby 2.1 on macOS Big Sur may be cumbersome. You should probably not use 2.1 for new projects but if you like me you may have an old project around that needs an upgrade. And testing in the old ruby version the project was written for first is not a bad start.</p><p>However when I tried to install the Ruby 2.1.10 for the project I got a lot of compilation errors and Google suggested a lot of solutions for me that did not work. But a combination of them did. So here is a TLDR version of the solution that did work for me.</p><p>Install OpenSSL 1.0 with Homebrew. This can live side by side with the latest version of OpenSSL available in Homebrew.</p><pre data-language="bash"><code>brew install rbenv/tap/openssl@1.0
</code></pre><p>Install Ruby 2.1.10 using <code>asdf</code> with some additional compiler configurations.</p><pre data-language="bash"><code>PKG_CONFIG_PATH=<span class="hljs-string">"<span class="hljs-variable">$(brew --prefix openssl@1.0)</span>/lib/pkgconfig"</span> \
LDFLAGS=<span class="hljs-string">"-L<span class="hljs-variable">$(brew --prefix openssl@1.0)</span>/lib"</span> \
CPPFLAGS=<span class="hljs-string">"-I<span class="hljs-variable">$(brew --prefix openssl@1.0)</span>/include"</span> \
PATH=<span class="hljs-string">"<span class="hljs-variable">$(brew --prefix openssl@1.0)</span>/bin:<span class="hljs-variable">$PATH</span>"</span> \
CONFIGURE_OPTS=<span class="hljs-string">"--with-openssl-dir=<span class="hljs-variable">$(brew --prefix openssl@1.0)</span>"</span> \
RUBY_CONFIGURE_OPTS=<span class="hljs-string">"--with-openssl-dir=<span class="hljs-variable">$(brew --prefix openssl@1.0)</span> --with-readline-dir=<span class="hljs-variable">$(brew --prefix readline)</span>"</span> \
optflags=<span class="hljs-string">"-Wno-error=implicit-function-declaration"</span> \
asdf install ruby 2.1.10
</code></pre><p><code>asdf</code> is using <code>ruby-build</code> behind the scene. So do most <code>rbenv</code> installations as well. So if you use <code>rbenv</code> you should be able to replace the last part <code>asdf install ruby 2.1.10</code> with <code>rbenv install 2.1.10</code>.</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/macos">macos</a></li><li><a href="/tags/ruby">ruby</a></li></ul></article></div><footer><p><a href="https://standout.se">Work with me</a></p><p><a href="/feed.rss">RSS feed</a></p><p><a href="https://github.com/JohnSundell/Publish">This is a static website built with Publish</a></p></footer></body></html>